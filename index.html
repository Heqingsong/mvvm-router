<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0,user-scalable=no,minimal-ui">
    <title>qs-router</title>

    <link rel="import" href="components/login.html" />
    <style type="text/css">
        .index-tipsy {
            color: green;
        }
        
        .login {
            color: #FF0000;
        }
    </style>

</head>

<body>
    <h1>hash模式</h1>
    <br/>
    <a href="#/login">login</a>
    <br/>
    <a href="#/login/admin">login/admin</a>
    <br/>
    <a href="#/login/user">login/user</a>
    <br/>
    <a href="#/login/user/info">login/user/info</a>
    <br/>
    <a href="#/register">register</a>
    <br />
    <button onclick="testPush()">测试代码跳转</button>

    <template id="index">
        <h1 class="index-tipsy">我是使用template标签定义的首页，哈哈~</h1>
    </template>

    <div id="template"></div>
    <div id="children1"></div>

    <script type="text/javascript" src="router.js"></script>
    <script type="text/javascript">
        let router = new Router({
            base: '/qs-router',
            routes: [{
                path: '/',
                component: {
                    // 故意这样写，测试直接使用当前页面模板的情况
                    template: document.getElementById('index').content,
                    beforeRouteUpdate: params => {
                        console.log('开始执行');
                    },
                    afterRouteUpdate: params => {
                        console.log('执行结束');
                    }
                },
                children: [{
                    path: 'login',
                    component: {
                        // 故意这样写，测试导入外部模板的情况
                        template: document.querySelector('link[rel=import]').import.querySelector('body').children
                    },
                    children: [{
                        path: 'admin',
                        component: {
                            template: `<h1>main</h1>`
                        }
                    }, {
                        path: 'user',
                        component: {
                            id: 'children1',
                            template: `<h1>children -> children</h1><div id='userInfo'></div>`
                        },
                        children: [{
                            path: 'info',
                            component: {
                                id: 'userInfo',
                                template: `<h1>children -> children -> children</h1>`
                            }
                        }]
                    }]
                }, {
                    path: 'register',
                    component: {
                        template: `<h1>register</h1>`
                    }
                }]
            }]
        });

        // 字符串
        // router.push('/login');

        function testPush() {
            // 对象
            router.push({
                path: '/login/admin'
            })
        }
    </script>
</body>

</html>